<!DOCTYPE html>
<html>

<head>
  <meta charset=utf-8 />
  <title>Council District 3 - Lexington</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <link href='https://api.mapbox.com/mapbox-assembly/v0.21.2/assembly.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <style>
  #map {
    background: #057e5c;
    width: 100%;
  }

  #locate-position{
    position:absolute;
    top:140px;
    left:25px;
    -webkit-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75);
    -moz-box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75);
    box-shadow: 0px 0px 5px 0px rgba(0,0,0,0.75);
  }

  #title {
    position: absolute;
    bottom: 20px;
    left: 15px;
    width: 35;
    padding: 6px 12px;
    background: rgba(256, 256, 256, .80);
    border: 1px solid #005d7e;
    border-radius: 3px;
    z-index: 800;
    font-size: 1.6em;
  }

  .leaflet-popup-tip,
  .leaflet-popup-content-wrapper {
    z-index: 900;
  }

  .leaflet-touch .leaflet-control-layers-toggle {
  background-image:url(images/layers.png);
  width: 127px;
  height: 44px;
  background-size: 127px 44px;
  }

  .leaflet-retina .leaflet-control-layers-toggle {
  background-image:url(images/layers.png);
  width: 127px;
  height: 44px;
  background-size: 127px 44px;
  }


  h1 {
    color: #005d7e;
    font-weight: bold;
    font-size: 125%;
  }
  h2 {
      color: #005d7e;
      font-weight: bold;
      font-size: 115%;
  }
  h3 {
      color: #005d7e;
      font-weight: bold;
      font-size: 105%;
  }
  a {
      color: #005d7e;
      font-weight: bold;
  }
  a:hover {
      color: #000000;
  }

  </style>
</head>

<body>

  <section id="title">
    <b>Council District 3 - Lexington</b>
  </section>

  <div id="map" class='viewport-full viewport-full-ml'></div>

    <!-- load leaflet, omnivore, and mapapp script -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
  <script src="district3.js"></script>
  <script src='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.js'></script>

  <!-- Map script -->

  <script>

  // initialize map, centered on KY
  var southWest = L.latLng(38.002115, -84.558017),
      northEast = L.latLng(38.062311, -84.457005),
      bounds = L.latLngBounds(southWest, northEast);

  var map = L.map('map', {
      center: [38.037261, -84.505871],
      maxBounds: bounds,
      zoom: 14.5,
      minZoom: 14,
      maxZoom: 18
    });

  // mapbox API access Token
  var accessToken = 'pk.eyJ1Ijoia29uc29sdXMiLCJhIjoiY2pnd2d2dXJrMTk4MzMzcGRmNjl6enpmYyJ9.MC43t60Y6axGbi32YET_tA'


  // request a mapbox raster tile layer and add to map
  L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.{ext}', {
	attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
	subdomains: 'abcd',
	minZoom: 0,
	maxZoom: 20,
	ext: 'png'
  }).addTo(map);

  // set display style for district
  var districtStyle = {
        "color": "#057e5c",
        "weight": 1,
        "fillOpacity" : 0.3,
        "opacity": 0.2
  };

  // add district polygon to map
  L.geoJson(District3, {
         style: districtStyle
  }).addTo(map);

  // leaflet locate
  map.locate({setView: false, maxZoom: 18});

  function onLocationFound(e) {
    // convert meters to feet
    var radius = e.accuracy * 3.28084;
    var feet = radius.toFixed(0);

    L.marker(e.latlng).addTo(map)
        .bindPopup("You are within " + feet + " feet of this point").openPopup();

    L.circle(e.latlng, radius).addTo(map);
}

map.on('locationfound', onLocationFound);

</script>

</body>
</html>
